<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Computer Use Desktop - Control Panel</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="header-content">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <img src="ic_launcher-playstore.png" alt="Logo" class="app-logo">
                    <h1 class="app-title">Simple Computer Use Desktop</h1>
                </div>
                <div class="status-container">
                    <span class="status-label">Status:</span>
                    <span id="status-indicator" class="status-indicator status-stopped">‚óè Stopped</span>
                </div>
            </div>
        </header>
        <main class="main-content">
            <div class="control-buttons">
                <button id="start-btn" class="btn btn-success">‚ñ∂ Start Server</button>
                <button id="stop-btn" class="btn btn-danger" disabled>‚èπ Stop Server</button>
            </div>
            <div class="tabs">
                <button class="tab-btn active" data-tab="control">Control</button>
                <button class="tab-btn" data-tab="config">Configuration</button>
                <button class="tab-btn" data-tab="logs">Logs</button>
                <button class="tab-btn" data-tab="history">History</button>
            </div>
            <div class="tab-content">
                <div id="control-tab" class="tab-pane active">
                    <div class="card">
                        <h2>Server Control Panel</h2>
                        <p>Bienvenido al panel de control del servidor de voz.</p>
                        <h3>üìã Gu√≠a R√°pida:</h3>
                        <ol>
                            <li>‚öôÔ∏è Configura el servidor en la pesta√±a Configuration</li>
                            <li>‚ñ∂Ô∏è Haz clic en 'Start Server' para iniciar</li>
                            <li>üìä Monitorea los logs en la pesta√±a Logs</li>
                            <li>üìú Ve el historial en la pesta√±a History</li>
                        </ol>
                    </div>
                </div>
                <div id="config-tab" class="tab-pane">
                    <div class="card">
                        <h2>Server Configuration</h2>
                        <form id="config-form">
                            <div class="config-section">
                                <h3>üåê Network</h3>
                                <div class="form-group">
                                    <label>Host: <input type="text" id="host" value="0.0.0.0"></label>
                                    <label>Port: <input type="number" id="port" value="5000" min="1" max="65535"></label>
                                </div>
                            </div>
                            <div class="config-section">
                                <h3>üîí SSL/TLS</h3>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="ssl">
                                        Enable SSL (HTTPS)
                                    </label>
                                    <label>SSL Certificate File: 
                                        <div style="display: flex; gap: 5px; align-items: center;">
                                            <input type="text" id="ssl-cert" placeholder="Path to certificate file" style="flex: 1;">
                                            <button type="button" class="btn btn-secondary" onclick="browseSSLFile('cert')" style="padding: 8px 12px; font-size: 12px;">Browse</button>
                                        </div>
                                    </label>
                                    <label>SSL Private Key File: 
                                        <div style="display: flex; gap: 5px; align-items: center;">
                                            <input type="text" id="ssl-key" placeholder="Path to private key file" style="flex: 1;">
                                            <button type="button" class="btn btn-secondary" onclick="browseSSLFile('key')" style="padding: 8px 12px; font-size: 12px;">Browse</button>
                                        </div>
                                    </label>
                                    <p style="font-size: 12px; color: #7f8c8d; margin-top: 5px;">Leave certificate and key empty to use self-signed certificate</p>
                                </div>
                            </div>
                            <div class="config-section">
                                <h3>ü§ñ Models</h3>
                                <div class="form-group">
                                    <label>Whisper Model: 
                                        <select id="whisper-model">
                                            <option value="tiny">Tiny</option>
                                            <option value="base">Base</option>
                                            <option value="small">Small</option>
                                            <option value="medium">Medium</option>
                                            <option value="large" selected>Large</option>
                                        </select>
                                    </label>
                                    <label>Ollama Model: <input type="text" id="ollama-model" value="gemma3:12b"></label>
                                    <label>Ollama Host: <input type="text" id="ollama-host" value="http://localhost:11434"></label>
                                </div>
                            </div>
                            <div class="config-section">
                                <h3>üåç Language & Translation</h3>
                                <div class="form-group">
                                    <label>Default Language: 
                                        <input type="text" id="language" value="es" placeholder="es, en, fr, etc.">
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="translation-enabled">
                                        Enable automatic translation of non-English languages
                                    </label>
                                    <p style="font-size: 12px; color: #7f8c8d; margin-top: 5px;">Language code (ISO 639-1): es, en, fr, de, etc.</p>
                                </div>
                            </div>
                            <div class="config-section">
                                <h3>üì∏ Screenshots</h3>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="screenshots-enabled">
                                        Enable screenshots after command execution
                                    </label>
                                    <label>Screenshot Directory: 
                                        <div style="display: flex; gap: 5px; align-items: center;">
                                            <input type="text" id="screenshot-dir" placeholder="./screenshots" style="flex: 1;">
                                            <button type="button" class="btn btn-secondary" onclick="browseDirectory('screenshot-dir')" style="padding: 8px 12px; font-size: 12px;">Browse</button>
                                        </div>
                                    </label>
                                </div>
                            </div>
                            <div class="config-section">
                                <h3>‚öôÔ∏è Advanced Settings</h3>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="debug">
                                        Enable debug mode
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="failsafe-enabled">
                                        Enable PyAutoGUI failsafe (move mouse to upper-left corner to abort)
                                    </label>
                                </div>
                            </div>
                            <div class="config-section">
                                <h3>üöÄ Service Settings</h3>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="start-on-boot">
                                        Start GUI on system startup (runs as service in system tray)
                                    </label>
                                </div>
                            </div>
                            <div class="config-section">
                                <h3>üì± Desktop Application</h3>
                                <div class="form-group">
                                    <p style="margin-bottom: 10px;">Install this application in your Linux applications menu for easy access.</p>
                                    <button type="button" class="btn btn-secondary" onclick="installDesktopApp()" id="install-desktop-btn">
                                        üì• Install to Applications Menu
                                    </button>
                                    <div id="install-desktop-status" style="margin-top: 10px; font-size: 13px;"></div>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn-primary" onclick="saveConfig()">üíæ Save</button>
                            </div>
                        </form>
                    </div>
                </div>
                <div id="logs-tab" class="tab-pane">
                    <div class="card">
                        <div class="logs-header">
                            <h2>Server Logs</h2>
                            <button class="btn btn-secondary" onclick="clearLogs()">üóë Clear</button>
                        </div>
                        <div id="logs-container" class="logs-container"></div>
                    </div>
                </div>
                <div id="history-tab" class="tab-pane">
                    <div class="card">
                        <div class="logs-header">
                            <h2>Command History</h2>
                            <button class="btn btn-secondary" onclick="loadHistory()">üîÑ Reload</button>
                        </div>
                        <div id="history-container">Start the server to view history.</div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script src="app.js"></script>
</body>
</html>
